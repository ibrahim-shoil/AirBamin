<?xml version="1.0" encoding="UTF-8"?>

<?import java.lang.String?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.ProgressBar?>
<?import javafx.scene.control.ScrollPane?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.image.ImageView?>
<?import javafx.scene.layout.BorderPane?>
<?import javafx.scene.layout.FlowPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.shape.SVGPath?>

<?import java.net.URL?>

<BorderPane fx:controller="com.airbamin.desktop.ui.TransferController"
            fx:id="rootPane"
            xmlns:fx="http://javafx.com/fxml">



    <top>
        <fx:include source="components/AppHeader.fxml"/>
    </top>

    <center>
        <ScrollPane fitToWidth="true" hbarPolicy="NEVER" vbarPolicy="AS_NEEDED" styleClass="page-scroll">
            <content>
                <VBox alignment="TOP_CENTER" spacing="22" styleClass="page">

                    <HBox alignment="CENTER_LEFT" spacing="12" maxWidth="1000">
                        <VBox spacing="4">
                            <Label text="%transfer.title" styleClass="section-title"/>
                            <Label text="%transfer.subtitle"
                                   wrapText="true"
                                   styleClass="body-text"/>
                        </VBox>
                    </HBox>

                    <VBox spacing="24" maxWidth="800">

                        <!-- QR Code / Connection Section -->
                        <VBox styleClass="card" spacing="16" alignment="CENTER">
                            <Label text="%transfer.qr.title" styleClass="card-title"/>
                            <Label text="%transfer.subtitle" wrapText="true" textAlignment="CENTER" styleClass="body-text"/>
                            
                            <javafx.scene.layout.StackPane styleClass="qr-container" maxWidth="220">
                                <ImageView fx:id="qrImageView" fitWidth="180" fitHeight="180" preserveRatio="true"/>
                            </javafx.scene.layout.StackPane>
                            
                            <Label text="%transfer.share.title" styleClass="subtext"/>
                            <javafx.scene.control.Hyperlink fx:id="connectionLink" styleClass="link"/>
                            <Label fx:id="connectionStatusLabel" styleClass="status-note" text="%transfer.status.waiting"/>
                        </VBox>

                        <!-- Progress Section -->
                        <VBox styleClass="card" spacing="16">
                            <HBox spacing="12" alignment="CENTER_LEFT">
                                <SVGPath content="M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96zM14 13v4h-4v-4H7l5-5 5 5h-3z" styleClass="icon-large"/>
                                <Label text="%transfer.progress.title" styleClass="card-title"/>
                            </HBox>
                            
                            <ProgressBar fx:id="progressBar" prefWidth="Infinity" progress="0" styleClass="progress-accent"/>
                            <Label fx:id="statusLabel" styleClass="status-note" text="%transfer.status.waiting"/>
                        </VBox>

                        <!-- Destination Section -->
                        <VBox styleClass="card" spacing="16">
                            <HBox spacing="12" alignment="CENTER_LEFT">
                                <SVGPath content="M20 6h-8l-2-2H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2zm0 12H4V8h16v10z" styleClass="icon-medium"/>
                                <Label text="%transfer.dest.title" styleClass="section-label"/>
                            </HBox>
                            
                            <HBox spacing="10" alignment="CENTER_LEFT" styleClass="path-bar">
                                <Label text="%transfer.dest.folder" styleClass="body-text, label-dim"/>
                                <Label fx:id="uploadDirLabel" HBox.hgrow="ALWAYS" styleClass="highlight-label, label-dim"/>
                            </HBox>
                            
                            <HBox spacing="12" alignment="CENTER_RIGHT">
                                <Button text="%transfer.btn.openfolder" fx:id="openFolderButton" onAction="#onOpenFolder" styleClass="secondary-button">
                                    <graphic>
                                        <SVGPath content="M19 19H5V5h7V3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2v-7h-2v7zM14 3v2h3.59l-9.83 9.83 1.41 1.41L19 6.41V10h2V3h-7z" styleClass="icon-small"/>
                                    </graphic>
                                </Button>
                            </HBox>
                        </VBox>
                    </VBox>
                </VBox>
            </content>
        </ScrollPane>
    </center>
</BorderPane>
